<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Average Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
        input, button { font-size: 16px; padding: 5px; margin: 5px; }
        #chart { display: flex; justify-content: space-between; align-items: flex-end; height: 200px; margin-top: 20px; border-bottom: 1px solid black; }
        .bar { width: 30px; margin-right: 5px; position: relative; }
        .bar-value { text-align: center; margin-top: 5px; font-size: 12px; }
        .bar-label { text-align: center; font-size: 12px; }
        .average-line { position: absolute; height: 2px; background-color: red; }
        .reset-button { background-color: red; color: white; }
        .arrow { font-size: 32px; margin: 0 20px; align-self: center; }
        .chart-container { display: flex; justify-content: space-between; align-items: flex-end; width: 45%; }
    </style>
</head>
<body>
    <h1>Average Calculator</h1>
    <input type="number" id="numberInput" placeholder="Enter a number">
    <button onclick="addNumber()">Add Number</button>
    <button class="reset-button" onclick="resetCalculator()">Reset</button>
    <div id="numbersList" class="info"></div>
    <div id="totalDisplay" class="info"></div>
    <div id="dataPointsDisplay" class="info"></div>
    <div id="averageDisplay" class="info"></div>
    <div id="averageEquation" class="info"></div>
    <div id="chart" class="chart-container"></div>

    <script>
        let numbers = [];

        function addNumber() {
            const input = document.getElementById('numberInput');
            const number = parseFloat(input.value);
            if (!isNaN(number)) {
                numbers.push(number);
                input.value = '';
                updateDisplay();
            }
        }

        function calculateTotal() {
            return numbers.reduce((a, b) => a + b, 0);
        }

        function calculateAverage() {
            const total = calculateTotal();
            return numbers.length > 0 ? total / numbers.length : 0;
        }

        function updateDisplay() {
            const numbersList = document.getElementById('numbersList');
            const totalDisplay = document.getElementById('totalDisplay');
            const dataPointsDisplay = document.getElementById('dataPointsDisplay');
            const averageDisplay = document.getElementById('averageDisplay');
            const averageEquation = document.getElementById('averageEquation');
            const chart = document.getElementById('chart');

            numbersList.textContent = 'Numbers: ' + numbers.join(', ');
            const total = calculateTotal();
            totalDisplay.textContent = 'Total: ' + total.toFixed(2);
            dataPointsDisplay.textContent = 'Number of Data Points: ' + numbers.length;
            const average = calculateAverage();
            averageDisplay.textContent = 'Average: ' + average.toFixed(2);
            averageEquation.textContent = `Average = Total / Number of Data Points = ${total.toFixed(2)} / ${numbers.length} = ${average.toFixed(2)}`;

            chart.innerHTML = '';
            const maxHeight = 180;
            const maxNumber = Math.max(...numbers, average);

            const blueBars = document.createElement('div');
            blueBars.className = 'chart-container';

            numbers.forEach((number, index) => {
                const barContainer = document.createElement('div');
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = (number / maxNumber) * maxHeight + 'px';
                bar.style.backgroundColor = 'blue';

                const value = document.createElement('div');
                value.className = 'bar-value';
                value.textContent = number.toFixed(2);

                const label = document.createElement('div');
                label.className = 'bar-label';
                label.textContent = String.fromCharCode(65 + index);

                barContainer.appendChild(bar);
                barContainer.appendChild(value);
                barContainer.appendChild(label);
                blueBars.appendChild(barContainer);
            });

            const orangeBars = document.createElement('div');
            orangeBars.className = 'chart-container';

            numbers.forEach((_, index) => {
                const barContainer = document.createElement('div');
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = (average / maxNumber) * maxHeight + 'px';
                bar.style.backgroundColor = 'orange';

                const value = document.createElement('div');
                value.className = 'bar-value';
                value.textContent = average.toFixed(2);

                const label = document.createElement('div');
                label.className = 'bar-label';
                label.textContent = String.fromCharCode(65 + index);

                barContainer.appendChild(bar);
                barContainer.appendChild(value);
                barContainer.appendChild(label);
                orangeBars.appendChild(barContainer);
            });

            chart.appendChild(blueBars);

            const arrow = document.createElement('div');
            arrow.className = 'arrow';
            arrow.textContent = 'âž”';
            chart.appendChild(arrow);

            chart.appendChild(orangeBars);

            // Add average line
            const averageLine = document.createElement('div');
            averageLine.className = 'average-line';
            averageLine.style.top = (maxHeight - (average / maxNumber) * maxHeight) + 'px';
            averageLine.style.width = '100%';
            averageLine.textContent = average.toFixed(2);
            averageLine.style.textAlign = 'right';
            averageLine.style.color = 'red';
            chart.appendChild(averageLine);
        }

        function resetCalculator() {
            numbers = [];
            updateDisplay();
        }

        // Add event listener for Enter key press
        document.getElementById('numberInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addNumber();
            }
        });
    </script>
</body>
</html>
